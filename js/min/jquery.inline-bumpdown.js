!function(a){"use strict";var b={};b.clicked=!1,b.opening=!1,b.close_bumpdown=function(a){a.is(":visible")&&a.slideUp("fast")},b.open_bumpdown=function(a){a.is(":visible")||(b.opening=!0,a.slideDown("fast",function(){b.opening=!1}))},a.fn.bumpdown=function(){return this.each(function(){var c=a(this),d=c.attr("id"),e=c.find(".target");c.addClass("bumpdown-trigger");var f=c.parents().filter(function(){return"block"===a(this).css("display")}).first();e.length||(e=c),d||a.error("bumpdowns need an id");var g='[data-trigger="'+d+'"]',h=a(g);h.addClass("bumpdown");var i={};i.offset=e.offset(),i.width=e.outerWidth(),i.halfway=i.offset.left-f.offset().left+Math.round(i.width/2)-16,h.prepend('<a class="bumpdown-close"><i class="goicon icon-x"></i></a>'),h.prepend('<span class="bumpdown-arrow" style="left: '+i.halfway+'px;"></span>'),a(document).on("click",g,function(){h.is(":visible")&&!b.opening&&(b.clicked=!0)}),a(document).on("click",function(){b.clicked||b.opening||!h.is(":visible")||b.close_bumpdown(h),b.clicked=!1}),c.on("mouseover",function(){c.doTimeout(d,300,function(){h.is(":visible")||b.open_bumpdown(h)})}),c.on("click",function(a){a.preventDefault(),h.is(":visible")||(a.stopPropagation(),b.open_bumpdown(h))}),h.find(".bumpdown-close").on("click",function(a){a.preventDefault(),a.stopPropagation(),b.close_bumpdown(h)})})}}(jQuery);